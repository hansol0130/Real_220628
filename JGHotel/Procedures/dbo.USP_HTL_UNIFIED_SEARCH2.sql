USE [JGHotel]
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROC [dbo].[USP_HTL_UNIFIED_SEARCH2]

/*
USP_HTL_UNIFIED_SEARCH2 '홀리데이', 101
*/

@KEYWORD VARCHAR(100) = '',
@TOP INT = 100

AS

SET @KEYWORD = REPLACE(@KEYWORD, ' ', '')

SELECT TOP (@TOP) INT_DOM, HOTEL_CODE, NAME, ENG_NAME
FROM HTL_IDX_SEARCH WITH (NOLOCK)
WHERE INDEX_NAME LIKE '%'+@KEYWORD+'%'
AND USE_YN='Y'
ORDER BY CHARINDEX('|', REVERSE(LEFT('|' + INDEX_NAME, CHARINDEX(@KEYWORD, '|' + INDEX_NAME) - 1))), SORT_ORDER


GO
