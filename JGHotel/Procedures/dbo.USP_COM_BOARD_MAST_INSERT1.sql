USE [JGHotel]
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROC [dbo].[USP_COM_BOARD_MAST_INSERT1]

/*
USP_COM_BOARD_MAST_INSERT1 'INFO', 'asdf', 'asdf', 'Y', 'Y', 'TKANG'
*/

@BD_TYPE VARCHAR(4),
@TITLE VARCHAR(300),
@CONTENTS VARCHAR(MAX),
@TOP_YN VARCHAR(1),
@USE_YN VARCHAR(1),
@UPDATE_USER VARCHAR(30)

AS

INSERT INTO COM_BOARD_MAST
(
	BD_TYPE,
	TITLE,
	CONTENTS,
	VIEW_CNT,
	DEPTH1,
	DEPTH2,
	DEPTH3,
	TOP_YN,
	USE_YN,
	CREATE_DATE,
	CREATE_USER,
	UPDATE_DATE,
	UPDATE_USER
)
VALUES
(
	@BD_TYPE,
	@TITLE,
	@CONTENTS,
	0,
	0,
	0,
	0,
	@TOP_YN,
	@USE_YN,
	GETDATE(),
	@UPDATE_USER,
	GETDATE(),
	@UPDATE_USER
)

DECLARE @ID INT;
SELECT @ID=@@IDENTITY;

UPDATE COM_BOARD_MAST SET DEPTH1=@ID
WHERE BD_NO=@ID
GO
