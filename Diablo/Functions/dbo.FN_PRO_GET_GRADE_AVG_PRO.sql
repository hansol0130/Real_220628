USE [Diablo]
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE FUNCTION [dbo].[FN_PRO_GET_GRADE_AVG_PRO]
(
	@PRO_CODE VARCHAR(20)
)
RETURNS INT
AS
BEGIN

	DECLARE @AVG_GRADE INT
	
	SELECT
		@AVG_GRADE = ISNULL(AVG(GRADE), 0)
	FROM PRO_COMMENT A WITH(NOLOCK) 
	WHERE PRO_CODE = @PRO_CODE
	
	RETURN (@AVG_GRADE)

END
GO
