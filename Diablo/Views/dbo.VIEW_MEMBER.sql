USE [Diablo]
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO



CREATE VIEW [dbo].[VIEW_MEMBER]
WITH SCHEMABINDING -- 여기를 주목
AS
	
	SELECT 
	CUS_NO, CUS_ID, CUS_PASS, CUS_STATE, CUS_NAME, LAST_NAME, FIRST_NAME, NICKNAME, EMAIL, GENDER, SOC_NUM1, NOR_TEL1, NOR_TEL2, NOR_TEL3, 
	ISNULL(NOR_TEL1,'') + ISNULL(NOR_TEL2,'') +ISNULL(NOR_TEL3,'') AS NOR_TEL,
	COM_TEL1, COM_TEL2, COM_TEL3, HOM_TEL1, HOM_TEL2, HOM_TEL3, FAX_TEL1, FAX_TEL2, FAX_TEL3, VISA_YN, PASS_YN, PASS_NUM, PASS_EXPIRE, PASS_ISSUE, 
	[NATIONAL], FOREIGNER_YN, CUS_GRADE, ETC, ETC2, BIRTHDAY, LUNAR_YN, RCV_EMAIL_YN, RCV_SMS_YN, ADDRESS1, ADDRESS2, ZIP_CODE, NEW_CODE, NEW_DATE,
	EDT_MESSAGE, OLD_YN, CU_YY, CU_SEQ, RCV_DM_YN, POINT_CONSENT, POINT_CONSENT_DATE, VSOC_NUM, 
	IPIN_DUP_INFO, IPIN_CONN_INFO, IPIN_ACC_DATE, TERMS2_YN, TERMS3_YN, SAFE_ID, BIRTH_DATE, OCB_AGREE_YN, OCB_AGREE_DATE, OCB_AGREE_EMP_CODE, OCB_CARD_NUM, 
	JOIN_TYPE, CERT_YN, LAST_LOGIN_DATE , PHONE_AUTH_YN , PHONE_AUTH_DATE , SNS_MEM_YN ,INFLOW_TYPE ,
	'N' AS SLEEP_YN 
	FROM DBO.CUS_MEMBER WITH(NOLOCK)
	WHERE CUS_ID IS NOT NULL 
	AND CUS_ID <> ''  
	UNION ALL 
	SELECT 
	CUS_NO, CUS_ID, CUS_PASS, CUS_STATE, CUS_NAME, LAST_NAME, FIRST_NAME, NICKNAME, EMAIL, GENDER, SOC_NUM1, NOR_TEL1, NOR_TEL2, NOR_TEL3, 
	ISNULL(NOR_TEL1,'') + ISNULL(NOR_TEL2,'') +ISNULL(NOR_TEL3,'') AS NOR_TEL,
	COM_TEL1, COM_TEL2, COM_TEL3, HOM_TEL1, HOM_TEL2, HOM_TEL3, FAX_TEL1, FAX_TEL2, FAX_TEL3, VISA_YN, PASS_YN, PASS_NUM, PASS_EXPIRE, PASS_ISSUE, 
	[NATIONAL], FOREIGNER_YN, CUS_GRADE, ETC, ETC2, BIRTHDAY, LUNAR_YN, RCV_EMAIL_YN, RCV_SMS_YN, ADDRESS1, ADDRESS2, ZIP_CODE, NEW_CODE, NEW_DATE,
	EDT_MESSAGE, OLD_YN, CU_YY, CU_SEQ, RCV_DM_YN, POINT_CONSENT, POINT_CONSENT_DATE, VSOC_NUM, 
	IPIN_DUP_INFO, IPIN_CONN_INFO, IPIN_ACC_DATE, TERMS2_YN, TERMS3_YN, SAFE_ID, BIRTH_DATE, OCB_AGREE_YN, OCB_AGREE_DATE, OCB_AGREE_EMP_CODE, OCB_CARD_NUM, 
	JOIN_TYPE, CERT_YN, LAST_LOGIN_DATE , PHONE_AUTH_YN , PHONE_AUTH_DATE , SNS_MEM_YN ,INFLOW_TYPE,
	'Y' AS SLEEP_YN 
	FROM DBO.CUS_MEMBER_SLEEP WITH(NOLOCK)
	WHERE CUS_ID IS NOT NULL 
	AND CUS_ID <> ''  


GO
